import{g as e,c as p,b as w,f,B as h,A as v}from"./useFetch-DucEEeGt.js";import{A as y,S as E}from"./add-to-bag-D9VxPnbD.js";import{J as M}from"./just-validate.es-C73wyOde.js";class b{constructor(){this.init()}async init(){const r=e("#email"),s=e("#password");if(!r||!s){console.error("Email or Password input element not found",{emailElement:r,passwordElement:s});return}const o=r.value,u=s.value;try{const t=(await p(w,o,u)).user,d={projectId:"crisp-b06bf"},l=e("#name-sign-up").value,c=e("#surname-sign-up").value,m=`https://firestore.googleapis.com/v1/projects/${d.projectId}/databases/(default)/documents/users`,g={fields:{uid:{stringValue:t.uid},name:{stringValue:l},surname:{stringValue:c},email:{stringValue:o}}},a=await f(m,{method:"POST",body:g});if(a.error){console.error("Error adding document:",a.error);return}a.data&&console.log("Document written with ID:",a.data.name),console.log(t.uid),document.cookie=`UID=${t.uid}`,window.location.href="/Crisp/cabinet.html#account-dashboard"}catch(n){console.log("There was an error:",n)}}}class A{form;constructor(){this.form=e(".form"),this.form&&this.init()}init(){const r=new M(this.form,{errorLabelStyle:{color:"#1D1F21"}});r.addField(e("#name-sign-up"),[{rule:"required",errorMessage:"Enter your name"},{rule:"customRegexp",value:/^[-\w.]+$/i,errorMessage:"Write correct name"}]).addField(e("#surname-sign-up"),[{rule:"required",errorMessage:"Enter your surname"},{rule:"customRegexp",value:/^[-\w.]+$/i,errorMessage:"Write correct surname"}]).addField(e("#email"),[{rule:"required",errorMessage:"Enter your email"},{rule:"customRegexp",value:/^[-\w.]+@([а-яёa-z0-9][-A-z0-9]+\.)+[A-z]{2,4}$/,errorMessage:"Write correct email"}]).addField(e("#password"),[{rule:"required",errorMessage:"Enter your password"},{rule:"customRegexp",value:/(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#$%^&*]{6,}/,errorMessage:"Incorrect password format"}]).addField(e("#confirm-password"),[{rule:"required",errorMessage:"Repeat your password"},{validator:s=>{const o=document.getElementById("password").value;return s===o},errorMessage:"Passwords must match"}]),r.onSuccess(()=>{console.log("Form is valid"),new b})}}document.addEventListener("DOMContentLoaded",async()=>{new h,new y,new v,new A});new E;
