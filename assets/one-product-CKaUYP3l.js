import{a as c,g as a,L as u,f as v,r as o,B as T,A as B}from"./stop-preload-TeSQh7p3.js";import{S as E,A as y,a as S,b as V}from"./add-to-bag-BWkjw7YT.js";import{P as D}from"./pagination-Ex4kQTRT.js";import{L as M}from"./you-may-also-like-CKyx27_T.js";class k{tabsBtn;tabsItems;constructor(){this.tabsBtn=c(".tabs__nav-btn"),this.tabsItems=c(".tabs__item"),this.init()}init(){this.tabsBtn.forEach(t=>{t.addEventListener("click",()=>this.onTabClick(t))})}onTabClick(t){const e=t.getAttribute("data-tab"),n=a(e);t.classList.contains("active")||(this.tabsBtn.forEach(s=>s.classList.remove("tabs__nav-btn_active")),this.tabsItems.forEach(s=>s.classList.remove("tabs__item_active")),t.classList.add("tabs__nav-btn_active"),n&&n.classList.add("tabs__item_active"))}}E.use([D,y]);const d=a(".main-img__swiper-wrapper"),h=a(".main-info__all-img");class ${swiper;slidesArr;constructor(){this.swiper=null,this.slidesArr=null,this.init().then(()=>u.stop("main-info__tabs"))}async init(){this.conectDb()}initSwiper(){if(c(".main-img__slide").length>1)this.swiper=new E(".main-img__swiper",{slidesPerView:1,autoplay:{delay:1e4},pagination:{el:".swiper-pagination"},grabCursor:!0,on:{slideChange:()=>this.onSlideChange()}}),this.initTabsSync();else{const e=a(".main-img__swiper");e&&e.classList.remove("swiper-container-initialized","swiper-container-horizontal")}}initTabsSync(){c(".tabs__nav-btn").forEach((e,n)=>{e.addEventListener("click",()=>{console.log(`Tab ${n+1} clicked`),this.swiper&&this.swiper.slideTo(n)})})}onSlideChange(){c(".tabs__nav-btn").forEach((e,n)=>{this.swiper&&n===this.swiper.realIndex?e.classList.add("tabs__nav-btn_active"):e.classList.remove("tabs__nav-btn_active")})}async conectDb(){const t=this.getDocumentIdFromURL();if(!t){console.error("Document ID not found in URL");return}const n=`https://firestore.googleapis.com/v1/projects/${{projectId:"crisp-b06bf"}.projectId}/databases/(default)/documents/clothers/${t}`,s=await v(n,{method:"GET"});if(s.error){console.error("Error fetching document:",s.error);return}s.data&&(this.slidesArr=s.data.fields,console.log(this.slidesArr),this.renderSlides(),this.initSwiper(),u.stop("main-img__slide"),u.stop("tabs__nav-btn"),new k)}getDocumentIdFromURL(){return new URLSearchParams(window.location.search).get("id")}renderSlides(){if(d&&h&&this.slidesArr){const{img:t,subImg1:e,subImg2:n,subImgWebP1:s,subImgWebP2:l}=this.slidesArr;if(t&&e&&n&&s&&l){const i=o("button",["tabs__nav-btn","tabs__nav-btn_active","skeleton"]);i.type="button",i.dataset.tab="#slide-1",i.innerHTML=`
          <img src="${t.stringValue}" />
        `;const r=o("button",["tabs__nav-btn","skeleton"]);r.type="button",r.dataset.tab="#slide-2",r.innerHTML=`
          <img src="${e.stringValue}" />
        `;const m=o("button",["tabs__nav-btn","skeleton"]);m.type="button",m.dataset.tab="#slide-3",m.innerHTML=`
          <img src="${n.stringValue}" />
        `,h.appendChild(i),h.appendChild(r),h.appendChild(m);const g=o("div",["main-img__slide","swiper-slide","tabs__item","tabs__item_active","skeleton"]);g.id="slide-1",g.innerHTML=`
          <img src="${t.stringValue}" />
        `;const _=o("div",["main-img__slide","swiper-slide","tabs__item","skeleton"]);_.id="slide-2",_.innerHTML=`
          <img src="${e.stringValue}" />
        `;const w=o("div",["main-img__slide","swiper-slide","tabs__item","skeleton"]);w.id="slide-3",w.innerHTML=`
          <img src="${n.stringValue}" />
        `,d.appendChild(g),d.appendChild(_),d.appendChild(w)}else if(t?.stringValue!=null){const i=o("button",["tabs__nav-btn","tabs__nav-btn_active","skeleton"]);i.type="button",i.dataset.tab="#slide-1",i.innerHTML=`
          <img src="${t.stringValue}" />
        `,h.appendChild(i);const r=o("div",["main-img__slide","swiper-slide","tabs__item","tabs__item_active"]);r.id="slide-1",r.innerHTML=`
          <img src="${t.stringValue}" />
        `,d.appendChild(r)}}}}class P{calculation;countElement;calculationElement;buttonCountPlus;buttonCountMinus;clotherInfo;constructor(){this.clotherInfo=null,this.calculationElement=document.getElementById("calculation"),this.countElement=document.getElementById("buttonCountNumber"),this.buttonCountPlus=document.getElementById("buttonCountPlus"),this.buttonCountMinus=document.getElementById("buttonCountMinus"),this.calculation=0,this.buttonCountPlus.onclick=this.incrementCount.bind(this),this.buttonCountMinus.onclick=this.decrementCount.bind(this),this.conectDb()}async conectDb(){const t=this.getDocumentIdFromURL();if(!t){console.error("Document ID not found in URL");return}const n=`https://firestore.googleapis.com/v1/projects/${{projectId:"crisp-b06bf"}.projectId}/databases/(default)/documents/clothers/${t}`,s=await v(n,{method:"GET"});if(s.error){console.error("Error fetching document:",s.error);return}if(s.data&&(this.clotherInfo=s.data.fields,console.log(this.clotherInfo),this.clotherInfo.cost?.stringValue)){const l=this.clotherInfo.cost.stringValue,i=parseFloat(l.replace(",","."));isNaN(i)||(this.calculation=i,this.updateCalculation(+this.countElement.innerHTML))}}getDocumentIdFromURL(){return new URLSearchParams(window.location.search).get("id")}incrementCount(){let t=+this.countElement.innerHTML;t<999&&(t++,this.countElement.innerHTML=t.toString(),this.updateCalculation(t))}decrementCount(){let t=+this.countElement.innerHTML;t>1&&(t--,this.countElement.innerHTML=t.toString(),this.updateCalculation(t))}updateCalculation(t){const e=this.calculation*t;this.calculationElement.innerHTML=this.formatPrice(e)}formatPrice(t){return t.toFixed(2).replace(".",",")}}class z{dropdownBtn;dropdownList;dropdownBtnInfo;radioButtons;constructor(t){this.dropdownBtn=a(`${t} .dropdown__btn`),this.dropdownList=a(`${t} .dropdown__list`),this.dropdownBtnInfo=this.dropdownBtn.querySelector(".dropdown__btn_info"),this.radioButtons=this.dropdownList.querySelectorAll('input[type="radio"]'),this.init()}init(){this.dropdownBtn.addEventListener("click",()=>this.toggleDropdown()),this.radioButtons.forEach(t=>t.addEventListener("change",()=>this.updateDropdown(t))),window.addEventListener("resize",()=>this.checkScreenWidth()),this.checkScreenWidth()}toggleDropdown(){this.dropdownList.classList.toggle("active"),this.dropdownBtn.classList.toggle("active")}updateDropdown(t){const e=t.parentElement;if(console.log("Radio changed:",t),console.log("Parent label:",e),e){const n=e.textContent?.trim().replace(/[\s]+$/,"")??"Size";console.log("Label text content:",n),this.dropdownBtnInfo.textContent=n}else this.dropdownBtnInfo.textContent="Size";this.dropdownList.classList.remove("active"),this.dropdownBtn.classList.remove("active")}checkScreenWidth(){window.innerWidth>1024?(this.dropdownList.classList.add("active"),this.dropdownBtn.classList.add("active")):(this.dropdownList.classList.remove("active"),this.dropdownBtn.classList.remove("active"))}}const b=a(".info__brand p"),f=a(".info__title"),L=c(".info__color-btns"),I=c(".sizes__list label"),C=a(".price__total span");class A{clotherInfo;constructor(){this.clotherInfo=null,this.init().then(()=>u.stop("main-info__info"))}async init(){this.conectDb()}async conectDb(){const t=this.getDocumentIdFromURL();if(!t){console.error("Document ID not found in URL");return}const n=`https://firestore.googleapis.com/v1/projects/${{projectId:"crisp-b06bf"}.projectId}/databases/(default)/documents/clothers/${t}`,s=await v(n,{method:"GET"});if(s.error){console.error("Error fetching document:",s.error);return}s.data&&(this.clotherInfo=s.data.fields,console.log(this.clotherInfo),this.updateUI())}getDocumentIdFromURL(){return new URLSearchParams(window.location.search).get("id")}updateUI(){this.brandAndTitle(),this.colors(),this.size(),this.price()}brandAndTitle(){b&&f&&(this.clotherInfo?(b.textContent=this.clotherInfo.brand?.stringValue||"No brand",f.textContent=this.clotherInfo.name?.stringValue||"No title",console.log(b,f)):(b.textContent="No brand",f.textContent="No title"))}colors(){this.clotherInfo?.color?.arrayValue?.values&&this.clotherInfo.color.arrayValue.values.forEach(t=>{L&&L.forEach(e=>{const n=o("div",["color",`color__${t.stringValue}`]),s=o("input",null);s.type="radio",s.name="color",s.id=t.stringValue;const l=o("div","custom-radio");n.appendChild(s),n.appendChild(l),e.appendChild(n)})})}size(){this.clotherInfo?.size?.arrayValue?.values&&(console.log("Sizes from Firestore:",this.clotherInfo.size.arrayValue.values),this.clotherInfo.size.arrayValue.values.forEach(t=>{const e=t.stringValue?.trim();e&&I&&I.forEach(n=>{n.textContent?.trim()===e&&n.classList.remove("no-size")})}))}price(){if(C&&this.clotherInfo?.cost?.stringValue){const e=this.clotherInfo.cost.stringValue.split(" ")[0];C.textContent=e}}}document.addEventListener("DOMContentLoaded",async()=>{new T,new B,new S,new $,new P,new z(".info__sizes"),new A,new M,u.stop("more-info")});new V;
