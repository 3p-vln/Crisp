import{S as p,N as c,A as w}from"./autoplay-CXgkKXRk.js";import{g as u,f as h,r as t,a as f}from"./search-DP2q2jjU.js";import{L as y}from"./stop-preload-lHMBXtTV.js";p.use([c,w]);const d=u(".you-may-also-like__swiper-wrapper");class C{swiper;slidesArr;constructor(){this.swiper=null,this.slidesArr=[],this.init().then(()=>y.stop("you-may-also-like__swiper"))}async init(){this.initSwiper(),this.loadCards()}initSwiper(){const e=()=>{window.innerWidth>1023?this.swiper||(this.swiper=new p(".you-may-also-like__swiper",{slidesPerView:5,spaceBetween:30,grabCursor:!0,navigation:{nextEl:".swiper-btn-next.you-may-also-like__swiper-btn-next",prevEl:".swiper-btn-prew.you-may-also-like__swiper-btn-prew"},breakpoints:{1440:{slidesPerView:5,spaceBetween:30},1023:{slidesPerView:4,spaceBetween:30}}})):(this.swiper&&(this.swiper.destroy(!0,!0),this.swiper=null),d&&d.classList.add("swiper-disabled"))};window.addEventListener("resize",e),e()}async loadCards(){const e={projectId:"crisp-b06bf"},i={structuredQuery:{from:[{collectionId:"clothers"}]}},a=`https://firestore.googleapis.com/v1/projects/${e.projectId}/databases/(default)/documents:runQuery`,s=await h(a,{method:"POST",body:i});if(s.error){console.error("Ошибка при загрузке данных:",s.error);return}s.data&&(s.data.forEach(r=>{const n=r.document.name.split("/").pop()||"";this.slidesArr.push({id:n,data:r.document.fields})}),console.log(this.slidesArr),this.renderSlides(),this.hidden(),this.swiper&&this.swiper.update())}renderSlides(){if(!d){console.error("swiperWrapper is null");return}this.slidesArr.forEach(e=>{const i=t("div",["you-may-also-like__swiper-slide","swiper-slide"]),a=t("a",["card","you-may-also-like__card",e.id]);a.href=`one-product.html?id=${e.id}`,i.appendChild(a);const s=t("div","card__img");s.innerHTML+=`
            <picture>
              <source srcset=${e.data.imgWebP.stringValue} type="image/webp" />
              <img src=${e.data.img.stringValue} />
            </picture>
      `;const r=t("div","card__info"),n=t("p","card__category");n.innerText=e.data.category.stringValue;const o=t("h3","card__title");o.innerText=e.data.name.stringValue;const l=t("p","card__price");l.innerText=e.data.cost.stringValue,r.appendChild(n),r.appendChild(o),r.appendChild(l),a.appendChild(s),a.appendChild(r),d.appendChild(i)})}hidden(){const e=f(".you-may-also-like__swiper-slide");for(let i=0;i<e.length;i++)if(window.innerWidth<1023)if(window.innerWidth>576){if(i<6)continue;e[i].classList.add("hidden")}else{if(i<4)continue;e[i].classList.add("hidden")}}}export{C as L};
