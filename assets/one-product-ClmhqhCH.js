import{a as o,g as n,f as b,B as g,A as _,L as w}from"./stop-preload-CWe_wQxZ.js";import{S as p,A as v,a as L}from"./skeleton-IR_OxhDj.js";import{P as I}from"./pagination-AmZVnSsV.js";import{L as E}from"./you-may-also-like-79-Nvqbk.js";class C{tabsBtn;tabsItems;constructor(){this.tabsBtn=o(".tabs__nav-btn"),this.tabsItems=o(".tabs__item"),this.init()}init(){this.tabsBtn.forEach(t=>{t.addEventListener("click",()=>this.onTabClick(t))})}onTabClick(t){const e=t.getAttribute("data-tab"),s=n(e);t.classList.contains("active")||(this.tabsBtn.forEach(i=>i.classList.remove("tabs__nav-btn_active")),this.tabsItems.forEach(i=>i.classList.remove("tabs__item_active")),t.classList.add("tabs__nav-btn_active"),s&&s.classList.add("tabs__item_active"))}}p.use([I,v]);const l=n(".main-img__swiper-wrapper"),d=n(".main-info__all-img");class B{swiper;slidesArr;constructor(){this.swiper=null,this.slidesArr=null,this.init()}init(){this.conectDb()}initSwiper(){if(o(".main-img__slide").length>1)this.swiper=new p(".main-img__swiper",{slidesPerView:1,autoplay:{delay:1e4},pagination:{el:".swiper-pagination"},grabCursor:!0,on:{slideChange:()=>this.onSlideChange()}}),this.initTabsSync();else{const e=n(".main-img__swiper");e&&e.classList.remove("swiper-container-initialized","swiper-container-horizontal")}}initTabsSync(){o(".tabs__nav-btn").forEach((e,s)=>{e.addEventListener("click",()=>{console.log(`Tab ${s+1} clicked`),this.swiper&&this.swiper.slideTo(s)})})}onSlideChange(){o(".tabs__nav-btn").forEach((e,s)=>{this.swiper&&s===this.swiper.realIndex?e.classList.add("tabs__nav-btn_active"):e.classList.remove("tabs__nav-btn_active")})}async conectDb(){const t=this.getDocumentIdFromURL();if(!t){console.error("Document ID not found in URL");return}const s=`https://firestore.googleapis.com/v1/projects/${{projectId:"crisp-b06bf"}.projectId}/databases/(default)/documents/clothers/${t}`,i=await b(s,{method:"GET"});if(i.error){console.error("Error fetching document:",i.error);return}i.data&&(this.slidesArr=i.data.fields,console.log(this.slidesArr),this.renderSlides(),this.initSwiper(),new C)}getDocumentIdFromURL(){return new URLSearchParams(window.location.search).get("id")}renderSlides(){if(l&&d&&this.slidesArr){const{img:t,subImg1:e,subImg2:s,subImgWebP1:i,subImgWebP2:f}=this.slidesArr;t&&e&&s&&i&&f?(d.innerHTML=`
          <button class="tabs__nav-btn tabs__nav-btn_active" type="button" data-tab="#slide-1">
              <img src="${t.stringValue}" />
          </button>
          <button class="tabs__nav-btn" type="button" data-tab="#slide-2">
              <img src="${e.stringValue}" />
          </button>
          <button class="tabs__nav-btn" type="button" data-tab="#slide-3">
              <img src="${s.stringValue}" />
          </button>
        `,l.innerHTML=`
          <div class="main-img__slide swiper-slide tabs__item tabs__item_active" id="slide-1">
            <img src="${t.stringValue}" />
          </div>
          <div class="main-img__slide swiper-slide tabs__item" id="slide-2">
            <img src="${e.stringValue}" />
          </div>
          <div class="main-img__slide swiper-slide tabs__item" id="slide-3">
            <img src="${s.stringValue}" />
          </div>
        `):t?.stringValue!=null&&(d.innerHTML=`
          <button class="tabs__nav-btn tabs__nav-btn_active" type="button" data-tab="#slide-1">
            <img src="${t.stringValue}" />
          </button>
        `,l.innerHTML=`
          <div class="main-img__slide swiper-slide tabs__item tabs__item_active" id="slide-1">
            <img src="${t.stringValue}" />
          </div>
        `)}}}class T{calculation;countElement;calculationElement;buttonCountPlus;buttonCountMinus;constructor(){this.calculationElement=document.getElementById("calculation"),this.countElement=document.getElementById("buttonCountNumber"),this.buttonCountPlus=document.getElementById("buttonCountPlus"),this.buttonCountMinus=document.getElementById("buttonCountMinus");const t=this.calculationElement.innerHTML.trim();this.calculation=+t.replace(",","."),this.buttonCountPlus.onclick=this.incrementCount.bind(this),this.buttonCountMinus.onclick=this.decrementCount.bind(this)}incrementCount(){let t=+this.countElement.innerHTML;t<999&&(t++,this.countElement.innerHTML=t.toString(),this.updateCalculation(t))}decrementCount(){let t=+this.countElement.innerHTML;t>1&&(t--,this.countElement.innerHTML=t.toString(),this.updateCalculation(t))}updateCalculation(t){const e=this.calculation*t;this.calculationElement.innerHTML=this.formatPrice(e)}formatPrice(t){return t.toFixed(2).replace(".",",")}}class S{dropdownBtn;dropdownList;dropdownBtnInfo;radioButtons;constructor(t){this.dropdownBtn=n(`${t} .dropdown__btn`),this.dropdownList=n(`${t} .dropdown__list`),this.dropdownBtnInfo=this.dropdownBtn.querySelector(".dropdown__btn_info"),this.radioButtons=this.dropdownList.querySelectorAll('input[type="radio"]'),this.init()}init(){this.dropdownBtn.addEventListener("click",()=>this.toggleDropdown()),this.radioButtons.forEach(t=>t.addEventListener("change",()=>this.updateDropdown(t))),window.addEventListener("resize",()=>this.checkScreenWidth()),this.checkScreenWidth()}toggleDropdown(){this.dropdownList.classList.toggle("active"),this.dropdownBtn.classList.toggle("active")}updateDropdown(t){const e=t.parentElement;if(console.log("Radio changed:",t),console.log("Parent label:",e),e){const s=e.textContent?.trim().replace(/[\s]+$/,"")??"Size";console.log("Label text content:",s),this.dropdownBtnInfo.textContent=s}else this.dropdownBtnInfo.textContent="Size";this.dropdownList.classList.remove("active"),this.dropdownBtn.classList.remove("active")}checkScreenWidth(){window.innerWidth>1024?(this.dropdownList.classList.add("active"),this.dropdownBtn.classList.add("active")):(this.dropdownList.classList.remove("active"),this.dropdownBtn.classList.remove("active"))}}const r=n(".info__brand p"),c=n(".info__title"),u=o(".info__color-btns"),h=o(".sizes__list label"),m=n(".price__total span");class y{clotherInfo;constructor(){this.clotherInfo=null,this.init()}init(){this.conectDb()}async conectDb(){const t=this.getDocumentIdFromURL();if(!t){console.error("Document ID not found in URL");return}const s=`https://firestore.googleapis.com/v1/projects/${{projectId:"crisp-b06bf"}.projectId}/databases/(default)/documents/clothers/${t}`,i=await b(s,{method:"GET"});if(i.error){console.error("Error fetching document:",i.error);return}i.data&&(this.clotherInfo=i.data.fields,console.log(this.clotherInfo),this.updateUI())}getDocumentIdFromURL(){return new URLSearchParams(window.location.search).get("id")}updateUI(){this.brandAndTitle(),this.colors(),this.size(),this.price()}brandAndTitle(){r&&c&&(this.clotherInfo?(r.textContent=this.clotherInfo.brand?.stringValue||"No brand",c.textContent=this.clotherInfo.name?.stringValue||"No title",console.log(r,c)):(r.textContent="No brand",c.textContent="No title"))}colors(){this.clotherInfo?.color?.arrayValue?.values&&this.clotherInfo.color.arrayValue.values.forEach(t=>{u&&u.forEach(e=>{e.insertAdjacentHTML("beforeend",`
              <div class="color color__${t.stringValue}">
                  <input type="radio" id="${t.stringValue}" name="color" />
                  <div class="custom-radio"></div>
              </div>
              `)})})}size(){this.clotherInfo?.size?.arrayValue?.values&&(console.log("Sizes from Firestore:",this.clotherInfo.size.arrayValue.values),this.clotherInfo.size.arrayValue.values.forEach(t=>{const e=t.stringValue?.trim();e&&h&&h.forEach(s=>{s.textContent?.trim()===e&&s.classList.remove("no-size")})}))}price(){if(m&&this.clotherInfo?.cost?.stringValue){const e=this.clotherInfo.cost.stringValue.split(" ")[0];m.textContent=e}}}document.addEventListener("DOMContentLoaded",async()=>{new g,new _,new B,new T,new S(".info__sizes"),new y,new E,w.stop()});new L;
